(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[727],{3015:function(e,t,a){Promise.resolve().then(a.bind(a,8783))},8783:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var r=a(7437),s=a(2265),n=a(2141),c=a(7648),o=a(9376);function l(){let[e,t]=(0,s.useState)(""),[a,l]=(0,s.useState)(null),[i,u]=(0,s.useState)(null),[d,m]=(0,s.useState)(!1),[x,h]=(0,s.useState)(!1),[p,f]=(0,s.useState)(!1),[g,b]=(0,s.useState)(""),[w,N]=(0,s.useState)(""),v=(0,o.useRouter)();(0,s.useEffect)(()=>{let e=window.location.hash;if(e.includes("access_token")){let t=new URLSearchParams(e.replace("#","")),a=t.get("access_token"),r=t.get("refresh_token");a&&r&&n.O.auth.setSession({access_token:a,refresh_token:r}).then(()=>{f(!0),h(!0)})}else h(!0)},[]);let j=async t=>{if(t.preventDefault(),l(null),u(null),!e||!/^\S+@\S+\.\S+$/.test(e)){u("Introduce un correo electr\xf3nico v\xe1lido.");return}m(!0);let{error:a}=await n.O.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/resetpassword")});m(!1),a?u(a.message):l("Te hemos enviado un correo para restablecer tu contrase\xf1a.")},y=async e=>{if(e.preventDefault(),u(null),g.length<6){u("La contrase\xf1a debe tener al menos 6 caracteres.");return}if(g!==w){u("Las contrase\xf1as no coinciden.");return}m(!0);let{error:t}=await n.O.auth.updateUser({password:g});m(!1),t?u("Error al actualizar la contrase\xf1a."):(l("Contrase\xf1a actualizada correctamente. Ya puedes iniciar sesi\xf3n."),setTimeout(()=>v.push("/login"),3e3))};return x?(0,r.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-[#E8F8F2] px-4 py-10",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("img",{src:"/logo-criador.png",alt:"TuCriadero logo",className:"w-20 h-20 drop-shadow"})}),p?(0,r.jsxs)("form",{onSubmit:y,className:"bg-white rounded-3xl shadow-xl p-8 w-full max-w-md space-y-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-[#5cae97] text-center",children:"Nueva contrase\xf1a"}),(0,r.jsx)("input",{type:"password",placeholder:"Nueva contrase\xf1a",value:g,onChange:e=>b(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#5cae97] outline-none",required:!0}),(0,r.jsx)("input",{type:"password",placeholder:"Confirmar contrase\xf1a",value:w,onChange:e=>N(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#5cae97] outline-none",required:!0}),i&&(0,r.jsx)("p",{className:"text-red-600 text-sm text-center",children:i}),a&&(0,r.jsx)("p",{className:"text-green-700 text-sm text-center",children:a}),(0,r.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-[#5cae97] hover:bg-[#4c9c85] text-white font-bold py-3 rounded-lg transition",children:d?"Actualizando...":"Guardar nueva contrase\xf1a"})]}):(0,r.jsxs)("form",{onSubmit:j,className:"bg-white rounded-3xl shadow-xl p-8 w-full max-w-md space-y-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-[#5cae97] text-center",children:"Recuperar contrase\xf1a"}),(0,r.jsx)("input",{type:"email",placeholder:"Correo electr\xf3nico",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#5cae97] outline-none",required:!0}),i&&(0,r.jsx)("p",{className:"text-red-600 text-sm text-center",children:i}),a&&(0,r.jsx)("p",{className:"text-green-700 text-sm text-center",children:a}),(0,r.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-[#5cae97] hover:bg-[#4c9c85] text-white font-bold py-3 rounded-lg transition",children:d?"Enviando...":"Enviar correo de recuperaci\xf3n"}),(0,r.jsx)("p",{className:"text-center text-sm text-gray-600 mt-2",children:(0,r.jsx)(c.default,{href:"/login",className:"text-[#5cae97] font-medium underline hover:text-[#4c9c85]",children:"Volver a iniciar sesi\xf3n"})})]}),(0,r.jsx)(c.default,{href:"/inicio",className:"mt-6 inline-block bg-[#e8f8f2] hover:bg-[#d2eee2] text-[#5cae97] font-medium px-6 py-2 rounded-full transition duration-200 shadow-sm",children:"‚Üê Volver al inicio"})]}):null}},2141:function(e,t,a){"use strict";a.d(t,{O:function(){return r}});let r=(0,a(6580).eI)("https://cinsudwupbiqqizvqwij.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNpbnN1ZHd1cGJpcXFpenZxd2lqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI0ODQ3MTIsImV4cCI6MjA2ODA2MDcxMn0.NL4RoZ3dPWllHaJfK37WtPtu-6NTNJ-DRJrs6MAY8E0")},9376:function(e,t,a){"use strict";var r=a(5475);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[648,580,971,117,744],function(){return e(e.s=3015)}),_N_E=e.O()}]);