(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{3402:function(e,t,n){Promise.resolve().then(n.bind(n,9294)),Promise.resolve().then(n.bind(n,5656)),Promise.resolve().then(n.bind(n,7277)),Promise.resolve().then(n.bind(n,2716)),Promise.resolve().then(n.bind(n,5567)),Promise.resolve().then(n.t.bind(n,6050,23))},9294:function(e,t,n){"use strict";n.d(t,{Providers:function(){return u}});var s=n(7437),r=n(1774),o=n(2141);function u(e){let{children:t}=e;return(0,s.jsx)(r.SessionContextProvider,{supabaseClient:o.O,initialSession:null,children:t})}},5656:function(e,t,n){"use strict";n.d(t,{default:function(){return u}});var s=n(2265),r=n(9376),o=n(2141);function u(){let e=(0,r.useRouter)();return(0,s.useEffect)(()=>{let{data:t}=o.O.auth.onAuthStateChange((t,n)=>{"SIGNED_IN"===t&&e.push("/inicio")});return()=>{null==t||t.subscription.unsubscribe()}},[e]),null}},7277:function(e,t,n){"use strict";n.d(t,{default:function(){return u}});var s=n(7437),r=n(2265),o=n(7648);function u(){let[e,t]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{localStorage.getItem("cookies-accepted")||t(!0)},[]),e)?(0,s.jsx)("div",{className:"fixed bottom-0 left-0 w-full bg-[#dff6ea] text-[#33695d] px-6 py-4 shadow-xl z-50",children:(0,s.jsxs)("div",{className:"max-w-5xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4",children:[(0,s.jsxs)("p",{className:"text-sm",children:["Utilizamos cookies para mejorar tu experiencia. Al continuar navegando aceptas nuestra"," ",(0,s.jsx)(o.default,{href:"/cookies",className:"underline text-[#5cae97] hover:text-[#4c9c85]",children:"Pol\xedtica de Cookies"}),"."]}),(0,s.jsx)("button",{onClick:()=>{localStorage.setItem("cookies-accepted","true"),t(!1)},className:"bg-[#5cae97] hover:bg-[#4c9c85] text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Aceptar"})]})}):null}},2716:function(e,t,n){"use strict";n.d(t,{default:function(){return u}});var s=n(2265),r=n(2141),o=n(1774);function u(){let e=(0,o.useUser)();return(0,s.useEffect)(()=>{if(!e)return;let t=r.O.channel("mensajes_nuevos").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:"receiver_id=eq.".concat(e.id)},e=>{let t=e.new;new BroadcastChannel("chat_channel").postMessage("nuevo_mensaje"),console.log("\uD83D\uDCE9 Nuevo mensaje recibido:",t)}).subscribe();return()=>{r.O.removeChannel(t)}},[e]),null}},5567:function(e,t,n){"use strict";n.d(t,{default:function(){return o}});var s=n(7437),r=n(2265);function o(){let e=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let t=new BroadcastChannel("chat_channel");return t.onmessage=t=>{if("nuevo_mensaje"===t.data){var n;null===(n=e.current)||void 0===n||n.play().catch(e=>{console.warn("No se pudo reproducir el sonido:",e)})}},()=>{t.close()}},[]),(0,s.jsx)("audio",{ref:e,preload:"auto",children:(0,s.jsx)("source",{src:"/sounds/notification.mp3",type:"audio/mpeg"})})}},2141:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});let s=(0,n(6580).eI)("https://cinsudwupbiqqizvqwij.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNpbnN1ZHd1cGJpcXFpenZxd2lqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI0ODQ3MTIsImV4cCI6MjA2ODA2MDcxMn0.NL4RoZ3dPWllHaJfK37WtPtu-6NTNJ-DRJrs6MAY8E0")},1774:function(e,t,n){"use strict";var s=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,u=Object.prototype.hasOwnProperty,i=(e,t,n)=>new Promise((s,r)=>{var o=e=>{try{i(n.next(e))}catch(e){r(e)}},u=e=>{try{i(n.throw(e))}catch(e){r(e)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,u);i((n=n.apply(e,t)).next())}),a={};((e,t)=>{for(var n in t)s(e,n,{get:t[n],enumerable:!0})})(a,{SessionContextProvider:()=>f,useSession:()=>p,useSessionContext:()=>h,useSupabaseClient:()=>m,useUser:()=>v}),e.exports=((e,t,n,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of o(t))u.call(e,n)||void 0===n||s(e,n,{get:()=>t[n],enumerable:!(i=r(t,n))||i.enumerable});return e})(s({},"__esModule",{value:!0}),a);var l=n(2265),c=n(7437),d=(0,l.createContext)({isLoading:!0,session:null,error:null,supabaseClient:{}}),f=({supabaseClient:e,initialSession:t=null,children:n})=>{let[s,r]=(0,l.useState)(t),[o,u]=(0,l.useState)(!t),[a,f]=(0,l.useState)();(0,l.useEffect)(()=>{!s&&t&&r(t)},[s,t]),(0,l.useEffect)(()=>{let t=!0;return function(){i(this,null,function*(){let{data:{session:n},error:s}=yield e.auth.getSession();if(t){if(s){f(s),u(!1);return}r(n),u(!1)}})}(),()=>{t=!1}},[]),(0,l.useEffect)(()=>{let{data:{subscription:t}}=e.auth.onAuthStateChange((e,t)=>{t&&("SIGNED_IN"===e||"TOKEN_REFRESHED"===e||"USER_UPDATED"===e)&&r(t),"SIGNED_OUT"===e&&r(null)});return()=>{t.unsubscribe()}},[]);let h=(0,l.useMemo)(()=>o?{isLoading:!0,session:null,error:null,supabaseClient:e}:a?{isLoading:!1,session:null,error:a,supabaseClient:e}:{isLoading:!1,session:s,error:null,supabaseClient:e},[o,s,a]);return(0,c.jsx)(d.Provider,{value:h,children:n})},h=()=>{let e=(0,l.useContext)(d);if(void 0===e)throw Error("useSessionContext must be used within a SessionContextProvider.");return e};function m(){let e=(0,l.useContext)(d);if(void 0===e)throw Error("useSupabaseClient must be used within a SessionContextProvider.");return e.supabaseClient}var p=()=>{let e=(0,l.useContext)(d);if(void 0===e)throw Error("useSession must be used within a SessionContextProvider.");return e.session},v=()=>{var e,t;let n=(0,l.useContext)(d);if(void 0===n)throw Error("useUser must be used within a SessionContextProvider.");return null!=(t=null==(e=n.session)?void 0:e.user)?t:null}},9376:function(e,t,n){"use strict";var s=n(5475);n.o(s,"useParams")&&n.d(t,{useParams:function(){return s.useParams}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}}),n.o(s,"useSearchParams")&&n.d(t,{useSearchParams:function(){return s.useSearchParams}})},6050:function(){}},function(e){e.O(0,[387,648,580,971,117,744],function(){return e(e.s=3402)}),_N_E=e.O()}]);