(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[417],{7940:function(e,t,i){Promise.resolve().then(i.bind(i,1494))},1494:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return r}});var s=i(7437),a=i(2265),n=i(2141),c=i(3145),l=i(7648);function r(){let[e,t]=(0,a.useState)([]),[i,r]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{let{data:{session:e}}=await n.O.auth.getSession();if(!e){window.location.href="/login";return}let{data:i,error:s}=await n.O.from("favoritos").select("anuncio_id, anuncios(*)").eq("user_id",e.user.id).order("created_at",{ascending:!1});!s&&i&&t(i.map(e=>e.anuncios)),r(!1)})()},[]);let d=async e=>{let{data:{session:i}}=await n.O.auth.getSession();if(!i)return;let{error:s}=await n.O.from("favoritos").delete().match({user_id:i.user.id,anuncio_id:e});s||t(t=>t.filter(t=>t.id!==e))};return(0,s.jsx)("main",{className:"min-h-screen bg-[#DFF6EA] px-4 py-10",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-center text-[#5cae97] mb-8",children:"Mis favoritos"}),i?(0,s.jsx)("p",{className:"text-center text-[#5cae97]",children:"Cargando favoritos..."}):0===e.length?(0,s.jsxs)("p",{className:"text-center text-gray-600",children:["A\xfan no has marcado ning\xfan anuncio como favorito.",(0,s.jsx)("br",{}),(0,s.jsx)(l.default,{href:"/",className:"text-[#5cae97] hover:underline mt-2 inline-block",children:"← Volver al inicio"})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>{var t,i;return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(null===(t=e.imagenes)||void 0===t?void 0:t[0])&&(0,s.jsx)(c.default,{src:e.imagenes[0],alt:e.titulo,width:400,height:250,className:"w-full h-48 object-cover"}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-[#5cae97]",children:e.titulo}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[null===(i=e.descripcion)||void 0===i?void 0:i.slice(0,90),"..."]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-3",children:[(0,s.jsx)(l.default,{href:"/anuncio/".concat(e.id),className:"text-sm text-white bg-[#5cae97] hover:bg-[#4a9b86] py-1 px-3 rounded-lg",children:"Ver"}),(0,s.jsx)("button",{onClick:()=>d(e.id),className:"text-sm text-red-500 hover:underline",children:"Quitar"})]})]})]},e.id)})}),(0,s.jsx)("div",{className:"text-center mt-10",children:(0,s.jsx)(l.default,{href:"/mi-cuenta",className:"text-[#5cae97] hover:underline",children:"← Volver a mi cuenta"})})]})})}},2141:function(e,t,i){"use strict";i.d(t,{O:function(){return s}});let s=(0,i(6580).eI)("https://cinsudwupbiqqizvqwij.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNpbnN1ZHd1cGJpcXFpenZxd2lqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI0ODQ3MTIsImV4cCI6MjA2ODA2MDcxMn0.NL4RoZ3dPWllHaJfK37WtPtu-6NTNJ-DRJrs6MAY8E0")}},function(e){e.O(0,[648,580,145,971,117,744],function(){return e(e.s=7940)}),_N_E=e.O()}]);