(()=>{var e={};e.id=330,e.ids=[330],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},3827:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>c,pages:()=>d,routeModule:()=>x,tree:()=>u}),a(7850),a(4840),a(5866);var t=a(3191),s=a(8716),l=a(7922),i=a.n(l),o=a(5231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);a.d(r,n);let u=["",{children:["editar-perfil",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,7850)),"C:\\Users\\Usuario\\webterminada-main\\app\\editar-perfil\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,4840)),"C:\\Users\\Usuario\\webterminada-main\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Usuario\\webterminada-main\\app\\editar-perfil\\page.tsx"],c="/editar-perfil/page",p={require:a,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/editar-perfil/page",pathname:"/editar-perfil",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},1634:(e,r,a)=>{Promise.resolve().then(a.bind(a,5746))},5746:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>c});var t=a(326),s=a(7577),l=a(8875),i=a(5047),o=a(5442),n=a(381),u=a(434);let d=["\xc1lava","Albacete","Alicante","Almer\xeda","Asturias","\xc1vila","Badajoz","Barcelona","Burgos","C\xe1ceres","C\xe1diz","Cantabria","Castell\xf3n","Ciudad Real","C\xf3rdoba","Cuenca","Gerona","Granada","Guadalajara","Guip\xfazcoa","Huelva","Huesca","Islas Baleares","Ja\xe9n","La Coru\xf1a","La Rioja","Las Palmas","Le\xf3n","L\xe9rida","Lugo","Madrid","M\xe1laga","Murcia","Navarra","Orense","Palencia","Pontevedra","Salamanca","Santa Cruz de Tenerife","Segovia","Sevilla","Soria","Tarragona","Teruel","Toledo","Valencia","Valladolid","Vizcaya","Zamora","Zaragoza"];function c(){let e=(0,l.useUser)(),r=(0,i.useRouter)(),[a,c]=(0,s.useState)(""),[p,x]=(0,s.useState)(""),[m,g]=(0,s.useState)(""),[f,h]=(0,s.useState)(""),[b,v]=(0,s.useState)(""),[j,y]=(0,s.useState)(""),[w,C]=(0,s.useState)(!1),[P,S]=(0,s.useState)(null),[q,N]=(0,s.useState)(null),[_,U]=(0,s.useState)(null),[z,A]=(0,s.useState)(!1),G=async t=>{if(t.preventDefault(),e){A(!0);try{let t=q;if(P){let r=P.name.split(".").pop(),a=`${e.id}/${Date.now()}.${r}`,{error:s}=await o.O.storage.from("avatars").upload(a,P,{upsert:!0});if(s){console.error(s),n.ZP.error("No se pudo subir el avatar");return}t=a}let{error:s}=await o.O.from("profiles").update({username:a,nombre:p,telefono:m,provincia:f,afijo:w?b:null,nucleo_zoologico:w?j:null,is_criadero:w,avatar_url:t||null}).eq("id",e.id);if(s){n.ZP.error("No se pudieron guardar los cambios");return}n.ZP.success("Perfil actualizado"),r.push("/mi-perfil")}catch(e){console.error(e),n.ZP.error("Error inesperado")}finally{A(!1)}}};return(0,t.jsxs)("div",{className:"min-h-screen bg-[#DFF6EA] flex flex-col items-center justify-center px-4 py-10",children:[t.jsx("img",{src:"/logo-criador.png",alt:"Logo",className:"w-20 h-20 mb-6"}),(0,t.jsxs)("form",{onSubmit:G,className:"bg-white w-full max-w-md p-6 rounded-3xl shadow-xl space-y-4",children:[t.jsx("h1",{className:"text-xl font-bold text-center text-[#5cae97]",children:"Editar perfil"}),t.jsx("input",{type:"file",accept:"image/*",onChange:e=>{let r=e.target.files?.[0];r&&(S(r),U(URL.createObjectURL(r)))}}),_&&t.jsx("img",{src:_,alt:"Vista previa",className:"w-[100px] h-[100px] rounded-full border object-cover mx-auto"}),t.jsx("input",{value:a,onChange:e=>c(e.target.value),placeholder:"Usuario",className:"w-full border px-4 py-2 rounded-lg"}),t.jsx("input",{value:p,onChange:e=>x(e.target.value),placeholder:"Nombre",className:"w-full border px-4 py-2 rounded-lg"}),t.jsx("input",{value:m,onChange:e=>g(e.target.value),placeholder:"Tel\xe9fono",className:"w-full border px-4 py-2 rounded-lg"}),(0,t.jsxs)("select",{value:f,onChange:e=>h(e.target.value),className:"w-full border px-4 py-2 rounded-lg",children:[t.jsx("option",{value:"",children:"Selecciona tu provincia"}),d.map(e=>t.jsx("option",{value:e,children:e},e))]}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:w,onChange:e=>C(e.target.checked)}),"Soy criadero"]}),w&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("input",{value:b,onChange:e=>v(e.target.value),placeholder:"Afijo",className:"w-full border px-4 py-2 rounded-lg"}),t.jsx("input",{value:j,onChange:e=>y(e.target.value),placeholder:"N\xfacleo zool\xf3gico",className:"w-full border px-4 py-2 rounded-lg"})]}),t.jsx("button",{type:"submit",disabled:z,className:"w-full bg-[#5cae97] text-white font-semibold py-2 rounded-lg",children:z?"Guardando...":"Guardar cambios"})]}),t.jsx(u.default,{href:"/inicio",className:"mt-6 inline-block text-[#5cae97] hover:underline",children:"â† Volver al inicio"})]})}},7850:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>t});let t=(0,a(8570).createProxy)(String.raw`C:\Users\Usuario\webterminada-main\app\editar-perfil\page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[300,82],()=>a(3827));module.exports=t})();